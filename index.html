<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FilmLaku21 â€” Beranda</title>
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>
<header>
  <div class="top-header">
    <div class="logo"><a href="index.html" style="color:inherit;">FilmLaku21</a></div>
    <div class="search-box">
      <input type="text" id="searchInput" placeholder="Cari Film..." />
      <div id="searchResults" class="search-results"></div>
    </div>
  </div>

  <nav class="nav-categories">
    <a href="index.html">ğŸ  Beranda</a>
    <a href="index.html?kategori=Drama">ğŸ­ Drama</a>
    <a href="index.html?kategori=Romance">ğŸ’– Romance</a>
    <a href="index.html?kategori=Action">ğŸ”¥ Action</a>
  </nav>
</header>

<main>
  <div class="container" id="film-list"></div>
</main>

<footer>
  <p>Â© 2025 FilmLaku21. Semua Hak Dilindungi.</p>
</footer>

<script src="assets/js/films.js"></script>
<script src="assets/js/utils.js"></script>
<script>
/* Render sections + live search init */
const params = new URLSearchParams(window.location.search);
const kategori = params.get("kategori") || null;

function renderFilmSection(title, ids) {
  return `<h2>${title}</h2>${renderFilmGrid(ids)}`;
}

function showFilms(filter = "") {
  let ids = kategori
    ? Object.keys(films).filter(id => (films[id].kategori || "").toLowerCase() === kategori.toLowerCase())
    : Object.keys(films);

  if (filter) {
    ids = ids.filter(id => films[id].title.toLowerCase().includes(filter.toLowerCase()));
  }

  if (kategori) {
    document.getElementById("film-list").innerHTML = renderFilmSection(`Kategori: ${kategori}`, ids);
  } else {
    // Homepage: Newest (we'll show all as "Film Terbaru"), plus separate small sections
    document.getElementById("film-list").innerHTML =
      renderFilmSection("Film Terbaru", ids) +
      renderFilmSection("Film Laris", Object.keys(films).slice(0, 6)) +
      renderFilmSection("Upload Terbaru", Object.keys(films).slice(0, 6).reverse());
  }
}

/* Live filter while typing (instant local filter on current view) */
document.getElementById("searchInput").addEventListener("input", (e) => {
  const q = e.target.value.trim();
  showFilms(q);
});

/* Init */
showFilms();
initLiveSearch();
</script>
</body>
</html>
